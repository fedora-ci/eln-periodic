<html>
  <head>
    <meta charset="utf-8">
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous">
    </script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <style>
      .extra {
	  background-color: #d9d2e9 !important;
      }
      .error {
	  background-color: #cccccc !important;
      }
      .new {
	  background-color: #c9daf8 !important;
      }
      .same {
	  background-color: #00FF00 !important;
      }
      .old {
	  background-color: #FFFFCC !important;
      }
      .none {
	  background-color: #FF0000 !important;
      }
    </style>
    <title>ELN Build Status</title>
  </head>
  <body>
    <h1>ELN Build Status</h1>
    <p>Page updated: {{ this_date }}
    <h2>Overview</h2>
    <table border=0>
      <tr>
        <td>SAME</td>
        <td style="text-align:right">{{ count_same }}</td>
        <td style="text-align:right">{{ percent_same }}</td>
        <td>Rawhide and ELN builds are caught up</td>
      </tr>
      <tr>
        <td>OLD</td>
        <td style="text-align:right">{{ count_old }}</td>
        <td style="text-align:right">{{ percent_old }}</td>
        <td>ELN build is older than Rawhides</td>
      </tr>
      <tr>
        <td>NONE</td>
        <td style="text-align:right">{{ count_none }}</td>
        <td style="text-align:right">{{ percent_none }}</td>
        <td>There is no ELN build</td>
      </tr>
      <tr>
        <td>TOTAL</td>
        <td style="text-align:right">{{ count_total }}</td>
        <td style="text-align:right">100.00%</td>
        <td>Total ELN packages</td>
      </tr>
    </table>
    <h2>Details</h2>
    <table id="comparison" style="compact"  border=1>
      <thead>
       <tr>
        <th>Package Name</th>
        <th>Status</th>
        <th>Rawhide NVR</th>
        <th>ELN NVR</th>
      </tr>
    </thead>
    <tbody>
      {% for p in packages -%}
      <tr>
        <td>{{ p['name'] }}</td>
        <td>{{ p['status'] }}</td>
        <td>{{ p['raw_nvr'] }}</td>
        <td>{{ p['eln_nvr'] }}</td>
      </tr>
      {% endfor -%}
	</tbody>
    </table>
    <script>
      $(document).ready(
	  function () {
	      $('#comparison').DataTable(
		  {
		      "paging": false,
		      "createdRow": function( row, data, dataIndex ) {
			  $(row).addClass(data[1]);
		      }
		  }
	      )
	  }
      );
    </script>
  </body>
</html>
